# Vendor Profile Inquiry Form - Complete Guide

## üìã Overview

The vendor profile detail page (`/[vendorId]`) now has a **fully functional inquiry form** that:
1. ‚úÖ **Saves data to the database** (Inquiry model)
2. ‚úÖ **Opens WhatsApp** with pre-filled vendor-specific message
3. ‚úÖ **Uses WhatsApp number from ContactInfo** (set in admin)

---

## üéØ Form Location

**Page**: Vendor Profile Detail Page  
**URL Pattern**: `https://chobighar.com/[vendor-slug]`  
**Example**: `https://chobighar.com/raj-photography`

**Form Section**: "Get In Touch" (Contact Section)  
**Scroll ID**: `#contact`

---

## üìù Form Fields

### Contact Form Includes:
- **Your Name** (required, text input)
- **Phone Number** (required, tel input)
- **Email Address** (required, email input)
- **Event Date** (optional, date input)
- **Message** (optional, textarea - tell us about your event requirements)

---

## üîÑ How It Works

### Complete Form Submission Flow:

```
User Fills Vendor Inquiry Form
     ‚Üì
Clicks "Send Message"
     ‚Üì
[STEP 1] Validate Form Data
     ‚Üì
[STEP 2] POST to /api/inquiry/create/
     ‚Üì
[STEP 3] Save to Database (Inquiry model)
     ‚îÇ        ‚îî‚îÄ inquiry_type: "vendor"
     ‚îÇ        ‚îî‚îÄ source: "vendor_detail_page"
     ‚îÇ        ‚îî‚îÄ service_name: Vendor Name
     ‚îÇ        ‚îî‚îÄ service_id: Vendor ID
     ‚Üì
[STEP 4] Open WhatsApp with Pre-filled Message
     ‚îÇ        ‚îî‚îÄ Fetch WhatsApp number from ContactInfo
     ‚îÇ        ‚îî‚îÄ Format vendor-specific message
     ‚îÇ        ‚îî‚îÄ Open wa.me/[number]?text=[message]
     ‚Üì
[STEP 5] Show Success Alert
     ‚Üì
[STEP 6] Reset Form
```

---

## üíæ Database Storage

### Inquiry Record Saved:

```json
{
  "inquiry_type": "vendor",
  "name": "Customer Name",
  "email": "customer@email.com",
  "phone": "+91 9876543210",
  "subject": "Vendor Inquiry - Raj Photography",
  "message": "I am interested in your Wedding Photography services for my event.",
  "service_name": "Raj Photography",
  "service_id": "123",
  "event_date": "2025-12-25",
  "source": "vendor_detail_page",
  "status": "new",
  "priority": "medium",
  "created_at": "2025-10-08T10:30:00Z"
}
```

### View in Admin Panel:

1. **Login**: `https://yourdomain.com/admin/`
2. **Navigate**: Inquiry ‚Üí Inquiries
3. **Filter by**: 
   - Inquiry Type = "Vendor"
   - Source = "vendor_detail_page"
4. **See Details**:
   - Customer info (name, email, phone)
   - Vendor details (service_name, service_id)
   - Event date
   - Message content
   - Status tracking

---

## üì± WhatsApp Integration

### WhatsApp Message Format:

```
üè™ Vendor Profile Inquiry üè™

üë§ Client Name: John Doe
üìß Email: john@example.com
üì± Phone: +91 9876543210
üè™ Vendor: Raj Photography
üéØ Service: Wedding Photography
üìÖ Event Date: December 25, 2025
üí∞ Budget: To be discussed
üìç Location: To be discussed
üí¨ Requirements: I am interested in your Wedding Photography services for my event. We are planning a traditional Bengali wedding.

‚ú® Inquiry for vendor via chobighar.com ‚ú®
```

### How WhatsApp Number Is Retrieved:

**Source**: `/api/header/contact-info/`  
**Model**: `ContactInfo` (in `backend/header/models.py`)  
**Field**: `whatsapp_number`

**Admin Location**: `/admin/header/contactinfo/`  
**How to Set**: 
1. Login to admin
2. Go to Header ‚Üí Contact Information
3. Edit the contact info record
4. Fill **"Whatsapp number"** field (e.g., `+919876543210`)
5. Ensure **"Is active"** is checked
6. Save

---

## üß™ Testing the Vendor Inquiry Form

### Test Steps:

1. **Navigate to Vendor Profile**:
   - Go to `/vendors` page
   - Click on any vendor card
   - Or directly visit `/[vendor-slug]`

2. **Scroll to Contact Section**:
   - Scroll down to "Get In Touch" section
   - Or click "Get Quote" button in hero
   - Or click "Contact" in sticky navigation

3. **Fill the Form**:
   ```
   Your Name: Test Customer
   Phone Number: +91 9876543210
   Email Address: test@example.com
   Event Date: [Select future date]
   Message: I'm interested in booking your services for my wedding in Kolkata.
   ```

4. **Submit**:
   - Click **"Send Message"** button
   - Wait for processing

5. **Expected Results**:
   - ‚úÖ Success alert appears: "Thank you for your inquiry! WhatsApp is opening..."
   - ‚úÖ WhatsApp opens in new tab with pre-filled message
   - ‚úÖ Form fields reset
   - ‚úÖ Data saved in admin panel

6. **Verify in Admin**:
   - Go to `/admin/inquiry/inquiry/`
   - Find latest inquiry with:
     - Inquiry Type: "Vendor" üõçÔ∏è
     - Source: "vendor_detail_page"
     - Service Name: [Vendor's name]
     - Status: "New" üÜï
     - All form data populated

---

## üé® UI/UX Features

### Contact Section Highlights:

**Left Column - Contact Form**:
- Clean, modern form design
- Rounded input fields with focus states
- Grid layout (2 columns on desktop)
- Full-width submit button
- Red accent color matching brand
- Validation on required fields

**Right Column - Contact Info**:
- **Contact Information Card** (gray background):
  - Phone number (clickable to call)
  - Email address (clickable to email)
  - Location address
  - Icons for each contact method

- **Why Choose Us Card** (red gradient background):
  - Response Time: Within 2 hours
  - Free Consultation: Yes
  - Price Range: Dynamic from vendor data

### Visual Design:
- White background with rounded corners
- Icon-based section headers
- Hover effects on inputs
- Focus ring on active field
- Responsive grid (stacks on mobile)

---

## üìä Admin Panel Features

### Inquiry List View Shows:

```
üë§ Customer Info          | üìù Type  | Subject Preview                | Status | Priority | Service     | Event Info          | Created
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Test Customer            | üõçÔ∏è Vendor | Vendor Inquiry - Raj Photo... | üÜï New | üü° Medium | Raj Photo... | üìÖ Dec 25, 2025    | Oct 8, 2025
üìû +91 9876543210        |          |                                |        |          |             | üìç Kolkata          |
‚úâÔ∏è test@example.com      |          |                                |        |          |             |                     |
```

### Inquiry Detail View Shows:

```
üë§ Customer Information
   Name: Test Customer
   Email: test@example.com
   Phone: +91 9876543210

üìù Inquiry Details
   Inquiry Type: Vendor
   Subject: Vendor Inquiry - Raj Photography
   Message: I'm interested in booking your services...
   Source: vendor_detail_page

üõçÔ∏è Service Information
   Service Name: Raj Photography
   Service ID: 123

üéâ Event Details
   Event Date: 2025-12-25
   Event Location: (optional)
   Budget Range: (optional)

‚öôÔ∏è Management
   Status: New (dropdown)
   Priority: Medium (dropdown)
   Assigned To: (optional)
   Notes: (internal admin notes)

üïí Timeline
   ID: abc-123-uuid
   Created At: 2025-10-08 10:30:00
   Updated At: 2025-10-08 10:30:00
   Responded At: (when first responded)
   Response Time: (calculated)
```

---

## üîß Technical Implementation

### Code Location:
**File**: `src/app/[vendorId]/page.tsx`

### Hooks Used:

```typescript
// Fetch vendor data
const { vendor, loading, error } = useVendorProfile(vendorSlug);

// Fetch header data (for WhatsApp number)
const { headerData } = useHeaderData();

// WhatsApp integration
const { sendVendorInquiryToWhatsApp } = useWhatsAppIntegration();
```

### Form State:

```typescript
const [formData, setFormData] = useState({
  name: '',
  phone: '',
  email: '',
  eventDate: '',
  message: ''
});
```

### Submit Handler:

```typescript
const handleSubmit = async (e: React.FormEvent) => {
  e.preventDefault();
  
  // Step 1: Save to database
  const response = await fetch(API_ENDPOINTS.INQUIRY_CREATE, {
    method: 'POST',
    body: JSON.stringify({
      inquiry_type: 'vendor',
      name: formData.name,
      email: formData.email,
      phone: formData.phone,
      subject: `Vendor Inquiry - ${vendor.name}`,
      message: formData.message,
      service_name: vendor.name,
      service_id: vendor.id,
      event_date: formData.eventDate,
      source: 'vendor_detail_page'
    })
  });

  // Step 2: Open WhatsApp
  if (response.ok) {
    sendVendorInquiryToWhatsApp({
      name: formData.name,
      email: formData.email,
      phone: formData.phone,
      vendorName: vendor.name,
      service: vendor.subcategory_name,
      eventDate: formData.eventDate,
      message: formData.message
    });
    
    // Step 3: Success feedback
    alert('Thank you! WhatsApp is opening...');
    
    // Step 4: Reset form
    setFormData({ name: '', phone: '', email: '', eventDate: '', message: '' });
  }
};
```

---

## üöÄ Comparison with Other Forms

### Three Inquiry Forms on chobighar:

| Feature | Homepage Form | Contact Page | Vendor Profile |
|---------|--------------|--------------|----------------|
| **Component** | `ContactForm.tsx` | `contact/page.tsx` | `[vendorId]/page.tsx` |
| **Purpose** | Photography inquiries | General contact | Vendor-specific inquiry |
| **Inquiry Type** | `photoshoot` | `general` | `vendor` |
| **Source** | `contact_form` | `contact_page` | `vendor_detail_page` |
| **Name Field** | ‚ùå (uses placeholder) | ‚úÖ Required | ‚úÖ Required |
| **Service Field** | Dropdown (shoot types) | Dropdown (services) | Auto (vendor name) |
| **Event Date** | ‚úÖ Required | ‚úÖ Optional | ‚úÖ Optional |
| **Vendor Info** | ‚ùå N/A | ‚ùå N/A | ‚úÖ Vendor name & ID |
| **WhatsApp** | ‚úÖ Opens after submit | ‚úÖ Opens after submit | ‚úÖ Opens after submit |
| **Database** | ‚úÖ Saves to Inquiry | ‚úÖ Saves to Inquiry | ‚úÖ Saves to Inquiry |

---

## üìã Admin Actions Available

### Bulk Actions (Select Multiple):
- ‚úÖ Mark selected inquiries as contacted
- ‚úÖ Mark selected inquiries as in progress
- ‚úÖ Mark selected inquiries as completed

### Individual Actions:
- View full inquiry details
- Edit inquiry information
- Add internal notes
- Assign to staff member
- Update status (New ‚Üí Contacted ‚Üí In Progress ‚Üí Completed)
- Update priority (Low ‚Üí Medium ‚Üí High ‚Üí Urgent)
- Add follow-ups (with date, method, notes)
- View response time

### Filters Available:
- Filter by inquiry type (Vendor/Photoshoot/General/etc)
- Filter by status (New/Contacted/In Progress/Completed/Cancelled)
- Filter by priority (Low/Medium/High/Urgent)
- Filter by source (vendor_detail_page/contact_form/contact_page)
- Filter by date created
- Filter by event date

### Search:
- Search by customer name
- Search by email
- Search by phone
- Search by subject
- Search by message content
- Search by service name
- Search by event location

---

## ‚úÖ Complete Setup Checklist

### Backend Setup:
- [x] Django server running
- [x] Inquiry model migrated
- [x] API endpoint `/api/inquiry/create/` working
- [x] ContactInfo model has `whatsapp_number` field
- [x] API endpoint `/api/header/contact-info/` working

### Admin Configuration:
- [ ] Login to `/admin/`
- [ ] Set WhatsApp number in Header ‚Üí Contact Information
- [ ] Mark Contact Information as "Is active"
- [ ] Test inquiry creation in admin

### Frontend Setup:
- [x] Vendor profile page has inquiry form
- [x] Form uses `useWhatsAppIntegration` hook
- [x] Form submits to `/api/inquiry/create/`
- [x] WhatsApp opens after successful submission
- [x] Form validation working
- [x] Success/error messages showing

### Testing:
- [ ] Visit any vendor profile page
- [ ] Fill and submit inquiry form
- [ ] Verify data in admin panel
- [ ] Verify WhatsApp opens with correct message
- [ ] Test form validation (required fields)
- [ ] Test error handling (network errors)

---

## üêõ Troubleshooting

### Issue: WhatsApp Doesn't Open

**Check**:
1. ‚ùì Is WhatsApp number set in admin?
   - Go to `/admin/header/contactinfo/`
   - Verify `whatsapp_number` field has value
   - Ensure format: `+919876543210` or `9876543210`

2. ‚ùì Is ContactInfo active?
   - Check "Is active" checkbox is checked
   - Save the record

3. ‚ùì Is API endpoint working?
   - Visit: `http://localhost:8000/api/header/contact-info/`
   - Should return: `{"phone": "...", "email": "...", "whatsapp_number": "..."}`

4. ‚ùì Check browser console for errors
   - Press F12 ‚Üí Console tab
   - Look for WhatsApp-related errors

### Issue: Form Not Submitting

**Check**:
1. ‚ùì Are required fields filled?
   - Name (required)
   - Phone (required)
   - Email (required)

2. ‚ùì Is backend running?
   - Django server should be on port 8000
   - Check terminal for Django logs

3. ‚ùì Check network tab
   - F12 ‚Üí Network tab
   - Submit form
   - Look for POST to `/api/inquiry/create/`
   - Check response status (should be 201 Created)

4. ‚ùì Check CORS settings
   - Ensure frontend URL is allowed in Django CORS settings

### Issue: Data Not Appearing in Admin

**Check**:
1. ‚ùì Was submission successful?
   - Check for success alert
   - Check network response (201 status)

2. ‚ùì Refresh admin page
   - Inquiries list updates after page refresh

3. ‚ùì Check filters
   - Inquiry Type filter might be hiding results
   - Clear all filters to see all inquiries

4. ‚ùì Check database directly
   - Django shell: `Inquiry.objects.filter(source='vendor_detail_page')`

---

## üìà Benefits

### For Customers:
‚úÖ Easy inquiry submission  
‚úÖ Instant WhatsApp communication  
‚úÖ No app switching needed  
‚úÖ Pre-filled vendor details  
‚úÖ Quick response expected  

### For Admins:
‚úÖ All inquiries in one place  
‚úÖ Track inquiry source (vendor profile)  
‚úÖ Know which vendor customer is interested in  
‚úÖ Manage status and priority  
‚úÖ Add internal notes  
‚úÖ Assign to team members  

### For Business:
‚úÖ Capture all leads  
‚úÖ Immediate customer engagement via WhatsApp  
‚úÖ Better conversion rate  
‚úÖ Organized lead management  
‚úÖ Performance tracking per vendor  

---

## üéØ Summary

### Vendor Profile Inquiry Form:
- **Location**: `/[vendorId]` ‚Üí Contact Section
- **Purpose**: Vendor-specific inquiries
- **Saves**: To Inquiry model with vendor details
- **Opens**: WhatsApp with vendor-specific message
- **Admin**: Full inquiry management in `/admin/inquiry/inquiry/`
- **WhatsApp Number**: From `/admin/header/contactinfo/`

### Complete Flow:
```
Customer visits Vendor Profile
     ‚Üì
Scrolls to "Get In Touch" section
     ‚Üì
Fills inquiry form (Name, Email, Phone, Date, Message)
     ‚Üì
Clicks "Send Message"
     ‚Üì
Data saved to Database (inquiry_type: vendor, source: vendor_detail_page)
     ‚Üì
WhatsApp opens with vendor-specific message
     ‚Üì
Customer can send WhatsApp immediately
     ‚Üì
Admin receives inquiry in admin panel
     ‚Üì
Admin can manage, respond, and track inquiry
```

**All vendor profile inquiries are now captured and integrated with WhatsApp!** üöÄ

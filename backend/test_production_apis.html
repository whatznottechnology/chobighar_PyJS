<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chabighar API - Production Verification</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; min-height: 100vh; }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { color: white; text-align: center; margin-bottom: 30px; font-size: 2.5em; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .server-info { background: white; padding: 20px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .server-info h2 { color: #B22222; margin-bottom: 15px; }
        .server-url { font-size: 1.2em; color: #666; padding: 10px; background: #f0f0f0; border-radius: 8px; margin: 10px 0; font-family: monospace; }
        .test-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin-top: 20px; }
        .test-card { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); transition: transform 0.3s ease; }
        .test-card:hover { transform: translateY(-5px); }
        .test-card h3 { color: #B22222; margin-bottom: 15px; font-size: 1.3em; }
        .endpoint { margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #ddd; }
        .endpoint.testing { border-left-color: #FFC107; background: #fff3cd; }
        .endpoint.success { border-left-color: #28a745; background: #d4edda; }
        .endpoint.error { border-left-color: #dc3545; background: #f8d7da; }
        .endpoint-name { font-weight: bold; color: #333; margin-bottom: 5px; }
        .endpoint-url { font-size: 0.9em; color: #666; font-family: monospace; word-break: break-all; margin: 5px 0; }
        .endpoint-status { display: inline-block; padding: 4px 12px; border-radius: 15px; font-size: 0.85em; font-weight: bold; margin-top: 5px; }
        .status-pending { background: #e0e0e0; color: #666; }
        .status-testing { background: #FFC107; color: #000; }
        .status-success { background: #28a745; color: white; }
        .status-error { background: #dc3545; color: white; }
        .response-preview { margin-top: 10px; padding: 10px; background: #2d2d2d; color: #f8f9fa; border-radius: 6px; font-family: monospace; font-size: 0.85em; max-height: 200px; overflow-y: auto; }
        .test-all-btn { display: block; width: 100%; padding: 15px; background: #B22222; color: white; border: none; border-radius: 10px; font-size: 1.2em; font-weight: bold; cursor: pointer; margin: 20px 0; transition: all 0.3s ease; }
        .test-all-btn:hover { background: #8B0000; transform: scale(1.02); }
        .summary { background: white; padding: 20px; border-radius: 15px; margin-top: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .summary h2 { color: #B22222; margin-bottom: 15px; }
        .summary-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 15px; }
        .stat { text-align: center; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px; }
        .stat-value { font-size: 2.5em; font-weight: bold; }
        .stat-label { font-size: 0.9em; margin-top: 5px; opacity: 0.9; }
        .loading { display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid #B22222; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Chabighar API - Production Verification</h1>
        
        <div class="server-info">
            <h2>üåê Server Information</h2>
            <div class="server-url">
                <strong>Production Server:</strong> <span id="serverUrl">https://admin.chobighar.com</span>
            </div>
            <p style="margin-top: 10px; color: #666;">Testing all API endpoints to ensure deployment is successful...</p>
        </div>

        <button class="test-all-btn" onclick="testAllAPIs()">üöÄ Test All APIs</button>

        <div class="test-grid" id="testGrid">
            <!-- Test cards will be inserted here -->
        </div>

        <div class="summary" id="summary" style="display: none;">
            <h2>üìä Test Summary</h2>
            <div class="summary-stats">
                <div class="stat" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                    <div class="stat-value" id="passedCount">0</div>
                    <div class="stat-label">‚úÖ Passed</div>
                </div>
                <div class="stat" style="background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);">
                    <div class="stat-value" id="failedCount">0</div>
                    <div class="stat-label">‚ùå Failed</div>
                </div>
                <div class="stat" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <div class="stat-value" id="totalCount">0</div>
                    <div class="stat-label">üìà Total</div>
                </div>
                <div class="stat" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                    <div class="stat-value" id="successRate">0%</div>
                    <div class="stat-label">üéØ Success Rate</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const BASE_URL = 'https://admin.chobighar.com';

        const apiTests = [
            {
                category: 'Health Checks',
                endpoints: [
                    { name: 'Health Check', url: '/health/' },
                    { name: 'Readiness Check', url: '/health/ready/' },
                    { name: 'Liveness Check', url: '/health/live/' }
                ]
            },
            {
                category: 'Header APIs',
                endpoints: [
                    { name: 'Header Data', url: '/api/header/' },
                    { name: 'Social Media', url: '/api/header/social-media/' },
                    { name: 'Contact Info', url: '/api/header/contact-info/' },
                    { name: 'Brand Info', url: '/api/header/brand-info/' }
                ]
            },
            {
                category: 'Homepage APIs',
                endpoints: [
                    { name: 'Homepage Data', url: '/api/homepage/' },
                    { name: 'Hero Slides', url: '/api/homepage/hero-slides/' },
                    { name: 'Video Testimonials', url: '/api/homepage/video-testimonials/' },
                    { name: 'Text Testimonials', url: '/api/homepage/text-testimonials/' },
                    { name: 'FAQs', url: '/api/homepage/faqs/' },
                    { name: 'Achievements', url: '/api/homepage/achievements/' }
                ]
            },
            {
                category: 'Vendor APIs',
                endpoints: [
                    { name: 'Vendor Categories', url: '/api/vendor/categories/' },
                    { name: 'Vendor Subcategories', url: '/api/vendor/subcategories/' },
                    { name: 'Vendor Profiles', url: '/api/vendor/profiles/' }
                ]
            },
            {
                category: 'Portfolio APIs',
                endpoints: [
                    { name: 'Portfolio Categories', url: '/api/portfolio/categories/' },
                    { name: 'Portfolio Items', url: '/api/portfolio/portfolios/' }
                ]
            },
            {
                category: 'Other APIs',
                endpoints: [
                    { name: 'Footer Data', url: '/api/footer/' },
                    { name: 'Contact Data', url: '/api/contact/' },
                    { name: 'About Data', url: '/api/aboutpage/' },
                    { name: 'Photoshoot Data', url: '/api/photoshootpage/' },
                    { name: 'Search', url: '/api/search/?q=wedding' },
                    { name: 'Inquiry Categories', url: '/api/inquiry/categories/' }
                ]
            }
        ];

        let totalPassed = 0;
        let totalFailed = 0;

        function createTestCard(category, endpoints) {
            return `
                <div class="test-card">
                    <h3>${category}</h3>
                    ${endpoints.map((ep, idx) => `
                        <div class="endpoint" id="endpoint-${category.replace(/\s+/g, '-')}-${idx}">
                            <div class="endpoint-name">${ep.name}</div>
                            <div class="endpoint-url">${ep.url}</div>
                            <span class="endpoint-status status-pending">‚è≥ Pending</span>
                            <div class="response-preview" id="response-${category.replace(/\s+/g, '-')}-${idx}" style="display: none;"></div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function initializeUI() {
            const grid = document.getElementById('testGrid');
            grid.innerHTML = apiTests.map(test => createTestCard(test.category, test.endpoints)).join('');
        }

        async function testEndpoint(category, endpoint, idx) {
            const categoryId = category.replace(/\s+/g, '-');
            const endpointEl = document.getElementById(`endpoint-${categoryId}-${idx}`);
            const responseEl = document.getElementById(`response-${categoryId}-${idx}`);
            const statusEl = endpointEl.querySelector('.endpoint-status');

            endpointEl.classList.remove('success', 'error');
            endpointEl.classList.add('testing');
            statusEl.className = 'endpoint-status status-testing';
            statusEl.innerHTML = '<span class="loading"></span> Testing...';

            try {
                const response = await fetch(BASE_URL + endpoint.url);
                const data = await response.json();

                if (response.ok) {
                    endpointEl.classList.remove('testing');
                    endpointEl.classList.add('success');
                    statusEl.className = 'endpoint-status status-success';
                    statusEl.textContent = `‚úÖ ${response.status} OK`;
                    
                    responseEl.style.display = 'block';
                    responseEl.textContent = JSON.stringify(data, null, 2).substring(0, 500) + '...';
                    
                    totalPassed++;
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                endpointEl.classList.remove('testing');
                endpointEl.classList.add('error');
                statusEl.className = 'endpoint-status status-error';
                statusEl.textContent = `‚ùå ${error.message}`;
                
                responseEl.style.display = 'block';
                responseEl.textContent = `Error: ${error.message}`;
                
                totalFailed++;
            }
        }

        async function testAllAPIs() {
            totalPassed = 0;
            totalFailed = 0;

            document.querySelector('.test-all-btn').disabled = true;
            document.querySelector('.test-all-btn').textContent = 'üîÑ Testing...';

            for (const test of apiTests) {
                for (let idx = 0; idx < test.endpoints.length; idx++) {
                    await testEndpoint(test.category, test.endpoints[idx], idx);
                    await new Promise(resolve => setTimeout(resolve, 200)); // Small delay between tests
                }
            }

            updateSummary();
            document.querySelector('.test-all-btn').disabled = false;
            document.querySelector('.test-all-btn').textContent = 'üîÑ Test Again';
        }

        function updateSummary() {
            const total = totalPassed + totalFailed;
            const successRate = total > 0 ? ((totalPassed / total) * 100).toFixed(1) : 0;

            document.getElementById('passedCount').textContent = totalPassed;
            document.getElementById('failedCount').textContent = totalFailed;
            document.getElementById('totalCount').textContent = total;
            document.getElementById('successRate').textContent = successRate + '%';
            document.getElementById('summary').style.display = 'block';
        }

        // Initialize on page load
        window.onload = initializeUI;
    </script>
</body>
</html>